{% comment %}
  Lifestyle Grid / Lookbook Section
  
  Design Philosophy:
  - Magazine-style image grid
  - Asymmetric layouts for visual interest
  - Hotspots/links to products
  - Perfect for lifestyle content and brand storytelling
  
  Use Cases:
  - Lifestyle photography
  - Product in context
  - Brand lifestyle imagery
  - Editorial content
{% endcomment %}

{%- liquid
  assign grid_layout = section.settings.grid_layout | default: 'masonry'
-%}

{%- style -%}
  .lifestyle-grid-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    padding: var(--spacing-2xl) 0;
  }

  @media screen and (max-width: 749px) {
    .lifestyle-grid-{{ section.id }} {
      padding: var(--spacing-xl) 0;
    }
  }

  .lifestyle-grid__header {
    text-align: {{ section.settings.text_alignment }};
    margin-bottom: var(--spacing-xl);
  }

  .lifestyle-grid__eyebrow {
    font-size: var(--text-xs);
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: {{ section.settings.eyebrow_color }};
    margin-bottom: var(--spacing-sm);
  }

  .lifestyle-grid__heading {
    font-size: clamp(2.4rem, 4vw, {{ section.settings.heading_size }}px);
    font-weight: 600;
    color: {{ section.settings.heading_color }};
    margin-bottom: var(--spacing-md);
  }

  .lifestyle-grid__description {
    font-size: var(--text-lg);
    color: {{ section.settings.text_color }};
    max-width: 700px;
    {% if section.settings.text_alignment == 'center' %}
      margin: 0 auto;
    {% endif %}
    line-height: var(--leading-relaxed);
  }

  .lifestyle-grid__container {
    display: grid;
    gap: {{ section.settings.grid_gap }}px;
    
    {% if grid_layout == 'uniform' %}
      grid-template-columns: repeat({{ section.settings.columns_mobile }}, 1fr);
      
      @media screen and (min-width: 750px) {
        grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
      }
    {% elsif grid_layout == 'masonry' %}
      grid-template-columns: repeat({{ section.settings.columns_mobile }}, 1fr);
      grid-auto-rows: 250px;
      
      @media screen and (min-width: 750px) {
        grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
        grid-auto-rows: 300px;
      }
    {% elsif grid_layout == 'featured' %}
      grid-template-columns: 1fr;
      
      @media screen and (min-width: 750px) {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 300px);
      }
    {% endif %}
  }

  .lifestyle-grid__item {
    position: relative;
    overflow: hidden;
    background-color: {{ section.settings.image_bg_color }};
    cursor: pointer;
    
    {% if grid_layout == 'masonry' %}
      grid-row: span 1;
    {% endif %}
  }

  {% if grid_layout == 'featured' %}
    .lifestyle-grid__item:first-child {
      @media screen and (min-width: 750px) {
        grid-column: span 2;
        grid-row: span 2;
      }
    }
  {% endif %}

  .lifestyle-grid__item--tall {
    @media screen and (min-width: 750px) {
      grid-row: span 2;
    }
  }

  .lifestyle-grid__item--wide {
    @media screen and (min-width: 750px) {
      grid-column: span 2;
    }
  }

  .lifestyle-grid__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    transition: transform var(--transition-slow);
  }

  .lifestyle-grid__item:hover .lifestyle-grid__image {
    transform: scale(1.05);
  }

  .lifestyle-grid__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: {{ section.settings.overlay_gradient }};
    opacity: 0;
    transition: opacity var(--transition-base);
    display: flex;
    align-items: flex-end;
    padding: var(--spacing-lg);
  }

  .lifestyle-grid__item:hover .lifestyle-grid__overlay {
    opacity: 1;
  }

  .lifestyle-grid__content {
    color: #ffffff;
    transform: translateY(20px);
    transition: transform var(--transition-base);
  }

  .lifestyle-grid__item:hover .lifestyle-grid__content {
    transform: translateY(0);
  }

  .lifestyle-grid__item-title {
    font-size: var(--text-xl);
    font-weight: 600;
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  .lifestyle-grid__item-text {
    font-size: var(--text-sm);
    line-height: 1.5;
    opacity: 0.9;
  }

  .lifestyle-grid__item-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: var(--spacing-sm);
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #ffffff;
    text-decoration: none;
  }

  .lifestyle-grid__item-link svg {
    width: 16px;
    height: 16px;
    transition: transform var(--transition-fast);
  }

  .lifestyle-grid__item-link:hover svg {
    transform: translateX(4px);
  }
{%- endstyle -%}

<section class="lifestyle-grid-{{ section.id }} section">
  <div class="page-width{% if section.settings.full_width %}-wide{% endif %}">
    {%- if section.settings.eyebrow != blank or section.settings.heading != blank or section.settings.description != blank -%}
      <div class="lifestyle-grid__header">
        {%- if section.settings.eyebrow != blank -%}
          <p class="lifestyle-grid__eyebrow">{{ section.settings.eyebrow }}</p>
        {%- endif -%}

        {%- if section.settings.heading != blank -%}
          <h2 class="lifestyle-grid__heading">{{ section.settings.heading }}</h2>
        {%- endif -%}

        {%- if section.settings.description != blank -%}
          <div class="lifestyle-grid__description">{{ section.settings.description }}</div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="lifestyle-grid__container">
      {%- for block in section.blocks -%}
        <div class="lifestyle-grid__item {% if block.settings.size == 'tall' %}lifestyle-grid__item--tall{% elsif block.settings.size == 'wide' %}lifestyle-grid__item--wide{% endif %}" {{ block.shopify_attributes }}>
          {%- if block.settings.image != blank -%}
            {{
              block.settings.image |
              image_url: width: 1200 |
              image_tag:
                loading: 'lazy',
                sizes: '(min-width: 990px) 33vw, 50vw',
                widths: '375, 550, 750, 1100, 1500',
                alt: block.settings.image.alt | escape,
                class: 'lifestyle-grid__image'
            }}
          {%- else -%}
            {{ 'lifestyle-2' | placeholder_svg_tag: 'lifestyle-grid__image placeholder-svg' }}
          {%- endif -%}

          {%- if block.settings.title != blank or block.settings.text != blank or block.settings.link != blank -%}
            <div class="lifestyle-grid__overlay">
              <div class="lifestyle-grid__content">
                {%- if block.settings.title != blank -%}
                  <h3 class="lifestyle-grid__item-title">{{ block.settings.title }}</h3>
                {%- endif -%}

                {%- if block.settings.text != blank -%}
                  <p class="lifestyle-grid__item-text">{{ block.settings.text }}</p>
                {%- endif -%}

                {%- if block.settings.link != blank -%}
                  <a href="{{ block.settings.link }}" class="lifestyle-grid__item-link">
                    {{ block.settings.link_text | default: 'Explore' }}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                  </a>
                {%- endif -%}
              </div>
            </div>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Lifestyle Grid",
  "tag": "section",
  "class": "section-lifestyle-grid",
  "max_blocks": 12,
  "settings": [
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "Lifestyle"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Life with Wine"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Discover the art of living well through our curated lifestyle imagery"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center",
      "label": "Text alignment"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 24,
      "max": 56,
      "step": 4,
      "unit": "px",
      "default": 40,
      "label": "Heading size"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "grid_layout",
      "options": [
        { "value": "uniform", "label": "Uniform grid" },
        { "value": "masonry", "label": "Masonry (varied heights)" },
        { "value": "featured", "label": "Featured (first image large)" }
      ],
      "default": "masonry",
      "label": "Grid layout"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Columns (desktop)"
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "default": 2,
      "label": "Columns (mobile)"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 8,
      "max": 48,
      "step": 8,
      "unit": "px",
      "default": 16,
      "label": "Grid gap"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "Full width grid",
      "info": "Extends grid beyond standard page width"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "default": "#FFFFFF",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "image_bg_color",
      "default": "#F5F5F5",
      "label": "Image background"
    },
    {
      "type": "color",
      "id": "eyebrow_color",
      "default": "#8B7355",
      "label": "Eyebrow color"
    },
    {
      "type": "color",
      "id": "heading_color",
      "default": "#1a1a1a",
      "label": "Heading color"
    },
    {
      "type": "color",
      "id": "text_color",
      "default": "#4a4a4a",
      "label": "Description color"
    },
    {
      "type": "header",
      "content": "Overlay"
    },
    {
      "type": "color_background",
      "id": "overlay_gradient",
      "default": "linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.7) 100%)",
      "label": "Overlay gradient"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "size",
          "options": [
            { "value": "default", "label": "Default" },
            { "value": "tall", "label": "Tall (2x height)" },
            { "value": "wide", "label": "Wide (2x width)" }
          ],
          "default": "default",
          "label": "Image size",
          "info": "Only applies to masonry layout"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Description"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text",
          "default": "Explore"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lifestyle Grid",
      "blocks": [
        {
          "type": "image",
          "settings": {
            "title": "Vineyard Tours",
            "text": "Experience where it all begins"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "Wine Pairing",
            "text": "Perfect combinations await",
            "size": "tall"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "Cellar Collection",
            "text": "Build your perfect cellar"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "Expert Guidance",
            "text": "Sommeliers at your service"
          }
        },
        {
          "type": "image",
          "settings": {
            "title": "Tasting Events",
            "text": "Join our exclusive tastings",
            "size": "wide"
          }
        }
      ]
    }
  ]
}
{% endschema %}
