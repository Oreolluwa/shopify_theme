{% comment %}
  Header Section - Main navigation with logo, menu, and cart
{% endcomment %}

<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-items.css' | asset_url }}" media="print" onload="this.media='all'">

{%- style -%}
  .header-wrapper {
    background-color: rgb(var(--black));
    border-bottom: 2px solid rgb(var(--gold));
  }

  .header {
    display: grid;
    grid-template-areas: 'left-icons heading icons';
    grid-template-columns: 1fr 2fr 1fr;
    align-items: center;
    padding: 1rem 2rem;
  }

  @media screen and (min-width: 990px) {
    .header {
      grid-template-areas: 'heading navigation icons';
      grid-template-columns: auto 1fr auto;
      column-gap: 2rem;
      padding: 1.5rem 4rem;
    }
  }

  .header__heading {
    grid-area: heading;
    justify-self: center;
  }

  @media screen and (min-width: 990px) {
    .header__heading {
      justify-self: start;
    }
  }

  .header__heading-logo {
    max-width: {{ section.settings.logo_width }}px;
  }

  .header__heading-link {
    text-decoration: none;
    color: rgb(var(--gold));
    font-size: 2.4rem;
    font-weight: 700;
    letter-spacing: 0.2rem;
    text-transform: uppercase;
  }

  .header__menu-item {
    color: rgb(var(--white));
    text-decoration: none;
    padding: 1rem 1.5rem;
    text-transform: uppercase;
    font-size: 1.4rem;
    letter-spacing: 0.1rem;
    transition: color 0.3s ease;
  }

  .header__menu-item:hover {
    color: rgb(var(--gold));
  }

  .header__icons {
    grid-area: icons;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 1.5rem;
  }

  .header__icon {
    color: rgb(var(--white));
    cursor: pointer;
    transition: color 0.3s ease;
  }

  .header__icon:hover {
    color: rgb(var(--gold));
  }

  .header__icon svg {
    width: 2.4rem;
    height: 2.4rem;
  }

  .header-menu-mobile-toggle {
    grid-area: left-icons;
    justify-self: start;
  }

  @media screen and (min-width: 990px) {
    .header-menu-mobile-toggle {
      display: none;
    }
  }

  {% if section.settings.sticky_header_type != 'none' %}
    .shopify-section-header-sticky {
      position: sticky;
      top: 0;
      z-index: 1000;
    }
  {% endif %}
{%- endstyle -%}

<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{% if section.settings.sticky_header_type != 'none' %}
  <div class="shopify-section-header-sticky">
{% endif %}

<div class="header-wrapper">
  <header class="header page-width">
    {%- if section.settings.menu != blank -%}
      <button type="button" class="header__icon header-menu-mobile-toggle" aria-controls="mobile-menu-drawer">
        {% render 'icon-hamburger' %}
      </button>
    {%- endif -%}

    <div class="header__heading">
      {%- if section.settings.logo != blank -%}
        <a href="{{ routes.root_url }}" class="header__heading-link header__heading-logo">
          <img src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}"
               srcset="{{ section.settings.logo | image_url: width: section.settings.logo_width }} 1x, {{ section.settings.logo | image_url: width: section.settings.logo_width | times: 2 }} 2x"
               alt="{{ shop.name }}"
               width="{{ section.settings.logo_width }}"
               height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio | round }}">
        </a>
      {%- else -%}
        <a href="{{ routes.root_url }}" class="header__heading-link">
          {{ shop.name }}
        </a>
      {%- endif -%}
    </div>

    {%- if section.settings.menu != blank -%}
      <nav class="header__inline-menu" style="display: none;">
        <ul class="list-menu list-menu--inline" role="list">
          {%- for link in section.settings.menu.links -%}
            <li>
              <a href="{{ link.url }}" class="header__menu-item"
                 {% if link.current %}aria-current="page"{% endif %}>
                {{ link.title | escape }}
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>

      <style>
        @media screen and (min-width: 990px) {
          .header__inline-menu {
            display: block !important;
          }
        }
      </style>
    {%- endif -%}

    <div class="header__icons">
      {%- if section.settings.enable_customer_avatar -%}
        <a href="{{ routes.account_url }}" class="header__icon">
          {% render 'icon-account' %}
        </a>
      {%- endif -%}

      <a href="{{ routes.cart_url }}" class="header__icon" id="cart-icon-bubble">
        {% render 'icon-cart' %}
        <span class="cart-count-bubble" {% if cart == empty %}style="display: none;"{% endif %}>
          {{- cart.item_count -}}
        </span>
      </a>
    </div>
  </header>
</div>

{%- if section.settings.menu != blank -%}
  <menu-drawer class="mobile-menu-drawer">
    <details id="mobile-menu-drawer" class="mobile-menu-drawer__container">
      <summary class="mobile-menu-drawer__header">
        <button type="button" class="mobile-menu-drawer__close-button" aria-label="Close menu">
          {% render 'icon-close' %}
        </button>
      </summary>
      <div class="mobile-menu-drawer__content">
        <nav class="mobile-menu-drawer__navigation">
          <ul class="mobile-menu" role="list">
            {%- for link in section.settings.menu.links -%}
              <li>
                <a href="{{ link.url }}" class="mobile-menu__link"
                   {% if link.current %}aria-current="page"{% endif %}>
                  {{ link.title | escape }}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </nav>
      </div>
    </details>
  </menu-drawer>
{%- endif -%}

{% if section.settings.sticky_header_type != 'none' %}
  </div>
{% endif %}

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:sections.header.settings.logo.label"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "default": 150,
      "unit": "px",
      "label": "t:sections.header.settings.logo_width.label"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "options": [
        {
          "value": "none",
          "label": "t:sections.header.settings.sticky_header_type.options__1.label"
        },
        {
          "value": "on-scroll-up",
          "label": "t:sections.header.settings.sticky_header_type.options__2.label"
        },
        {
          "value": "always",
          "label": "t:sections.header.settings.sticky_header_type.options__3.label"
        }
      ],
      "default": "on-scroll-up",
      "label": "t:sections.header.settings.sticky_header_type.label"
    },
    {
      "type": "checkbox",
      "id": "enable_customer_avatar",
      "default": true,
      "label": "t:sections.header.settings.enable_customer_avatar.label"
    }
  ]
}
{% endschema %}
